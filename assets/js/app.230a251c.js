(function(e){function t(t){for(var o,i,l=t[0],a=t[1],s=t[2],d=0,f=[];d<l.length;d++)i=l[d],Object.prototype.hasOwnProperty.call(c,i)&&c[i]&&f.push(c[i][0]),c[i]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,s||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,l=1;l<n.length;l++){var a=n[l];0!==c[a]&&(o=!1)}o&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},c={app:0},r=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],a=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var u=a;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"19b2":function(e,t,n){},3275:function(e,t,n){"use strict";n("6894")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),c={id:"notebook"};function r(e,t,n,r,i,l){var a=Object(o["m"])("Mainpane"),s=Object(o["m"])("Preview");return Object(o["i"])(),Object(o["d"])("div",c,[Object(o["g"])(a,{onNotechange:l.noteContent},null,8,["onNotechange"]),Object(o["g"])(s,{notehtml:i.notehtml,mainScrollTop:i.mainScrollTop},null,8,["notehtml","mainScrollTop"])])}var i=["innerHTML"];function l(e,t,n,c,r,l){return Object(o["i"])(),Object(o["d"])("aside",{ref:"preview",class:"preview",innerHTML:l.notePreview},null,8,i)}var a={name:"Preview",props:["notehtml","mainScrollTop"],data:function(){return{content:this.notehtml}},computed:{notePreview:function(){return this.content}},watch:{notehtml:function(){var e=this;this.content=this.notehtml;var t=document.querySelector(".preview"),n=t.scrollHeight-t.clientHeight;console.log("rate receive",this.mainScrollTop),console.log("scrolltop",this.mainScrollTop*n),window.requestAnimationFrame((function(){t.scrollTo(0,e.mainScrollTop*n)}))}}},s=(n("3275"),n("7e05"),n("6b0d")),u=n.n(s);const d=u()(a,[["render",l],["__scopeId","data-v-308c893f"]]);var f=d,h=function(e){return Object(o["k"])("data-v-495ed8ff"),e=e(),Object(o["j"])(),e},p={class:"main"},v={class:"cover"},b=h((function(){return Object(o["e"])("div",null,"选择笔记开始写作吧",-1)})),g=[b],m={class:"toolbar"};function O(e,t,n,c,r,i){var l=Object(o["m"])("Sidebar");return Object(o["i"])(),Object(o["d"])(o["a"],null,[Object(o["g"])(l,{onSelect:i.selectedNote,ref:"sidebar"},null,8,["onSelect"]),Object(o["e"])("section",p,[Object(o["q"])(Object(o["e"])("div",v,g,512),[[o["p"],i.noSelectedNote]]),Object(o["e"])("div",m,[Object(o["q"])(Object(o["e"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return r.title=e})},null,512),[[o["o"],r.title]]),Object(o["e"])("button",{onClick:t[1]||(t[1]=function(){return i.star&&i.star.apply(i,arguments)})},"标记"),Object(o["e"])("button",{onClick:t[2]||(t[2]=function(){return i.del&&i.del.apply(i,arguments)})},"删除"),Object(o["e"])("button",{onClick:t[3]||(t[3]=function(){return i.save&&i.save.apply(i,arguments)})},"保存")]),Object(o["q"])(Object(o["e"])("textarea",{"onUpdate:modelValue":t[4]||(t[4]=function(e){return r.content=e})},null,512),[[o["o"],r.content]])])],64)}n("7db0");var j=function(e){return Object(o["k"])("data-v-cc3fa3ac"),e=e(),Object(o["j"])(),e},S={class:"side-bar"},w={class:"toolbar"},N=["title"],y=j((function(){return Object(o["e"])("i",{class:"material-icons"},"add",-1)})),_=Object(o["f"])("增加笔记 "),x=[y,_],k={class:"notes"},T=["onClick"],I={key:0,class:"icon material-icons"};function P(e,t,n,c,r,i){return Object(o["i"])(),Object(o["d"])("aside",S,[Object(o["e"])("div",w,[Object(o["e"])("button",{onClick:t[0]||(t[0]=function(){return i.addNote&&i.addNote.apply(i,arguments)}),title:r.notes.length+" note(s) already"},x,8,N)]),Object(o["e"])("div",k,[(Object(o["i"])(!0),Object(o["d"])(o["a"],null,Object(o["l"])(i.sortedNotes,(function(e){return Object(o["i"])(),Object(o["d"])("div",{class:Object(o["h"])(["note",{selected:e===i.selectedNote}]),onClick:function(t){return i.selectNote(e)},key:e.id},[e.favorite?(Object(o["i"])(),Object(o["d"])("i",I,"star")):Object(o["c"])("",!0),Object(o["f"])(Object(o["n"])(e.title),1)],10,T)})),128))])])}n("4e82"),n("fb6a"),n("a434");var M={name:"Sidebar",data:function(){return{notes:JSON.parse(localStorage.getItem("notes"))||[],selectedId:localStorage.getItem("selected-id")||null,isSelected:this.selectedNote}},computed:{selectedNote:function(){var e=this;return this.notes.find((function(t){return t.id===e.selectedId}))},sortedNotes:function(){return this.notes.slice().sort((function(e,t){return e.created-t.created})).sort((function(e,t){return e.favorite===t.favorite?0:e.favorite?-1:1}))}},watch:{notes:{handler:"saveNotes",deep:!0},selectedId:function(e,t){localStorage.setItem("selected-id",e),console.log("old",t)}},methods:{addNote:function(){var e=Date.now(),t={id:String(e),title:"New Note"+(this.notes.length+1),content:"Type to Enjoy the Markdown!",created:e,favorite:!1};this.notes.push(t),this.selectNote(t)},removeNote:function(){if(this.selectedNote&&confirm("Delete the note?")){var e=this.notes.indexOf(this.selectedNote);-1!==e&&this.notes.splice(e,1)}this.isSelected=!1},selectNote:function(e){this.selectedId=e.id,this.$emit("select",this.selectedId)},saveNotes:function(){localStorage.setItem("notes",JSON.stringify(this.notes)),console.log("Notes saved!",new Date)},favoriteNote:function(){this.selectedNote.favorite^=!0},getSelected:function(){return this.isSelected}},updated:function(){console.log("selected",this.selectedId)}};n("ad4d");const q=u()(M,[["render",P],["__scopeId","data-v-cc3fa3ac"]]);var C=q,E={name:"Mainpane",components:{Sidebar:C},data:function(){return{content:"",selectedId:null,noSelected:!0,title:"title"}},watch:{content:function(){var e=document.querySelector("textarea"),t=e.scrollTop,n=document.querySelector("textarea").scrollHeight-e.offsetHeight-38;this.$emit("notechange",{content:this.noSelectedNote?"":this.content,height:t/n})}},methods:{selectedNote:function(e){this.selectedId=e;var t=this.$refs.sidebar.notes.find((function(t){return t.id===e}));this.content=t.content,this.noSelected=!1,this.title=t.title},save:function(){var e=this,t=this.$refs.sidebar.notes.find((function(t){return t.id===e.selectedId}));t.content=this.content,t.title=this.newTitle},del:function(){this.$refs.sidebar.removeNote(),this.content="",this.noSelected=!0},star:function(){this.$refs.sidebar.favoriteNote()}},computed:{noSelectedNote:function(){return this.noSelected},newTitle:function(){return this.title}}};n("919a"),n("c422");const H=u()(E,[["render",O],["__scopeId","data-v-495ed8ff"]]);var $=H,J=(n("ac1f"),n("5319"),n("498a"),function(e){var t,n=/.+\n/g,o="",c=0,r="";while(null!=(t=n.exec(e))){var i=t.shift(),l=/^```/;if(l.test(i))c++,2==c&&(o+=m(r),r="",c=0);else if(c<2&&c>0)r+=i;else{var a=void 0,s=void 0;if(a=d(i.slice(0)),a)a&&(s=a);else{var u=S(i);u=f(u),u=j(u),u=h(u),u=p(u),u=v(u),u=b(u),u=g(u),u=O(u),s="<p>"+u+"</p>"}o+=s}}return o||"";function d(e){var t=/#+\s/;if(t.test(e)){var n=t.exec(e),o=e.replace(t,(function(){return"<h"+(n[0].length-1)+">"}));return o+"</h"+(n[0].length-1)+">"}return!1}function f(e){var t=/\*{2}[^*]*\*?[^*]*\*{2}/g,n=null,o=[];while(null!=(n=t.exec(e))){var c="",r=n[0].replace(/\*{2}/g,"").trim();0!==r.length&&(c="<strong>"+r+"</strong>"),o.push(c.slice(0))}var i=/\*{2}[^*]*\*?[^*]*\*{2}/;return o.forEach((function(t){e=e.replace(i,t)})),e}function h(e){var t=/_{2}[^_]*_?[^_]*_{2}/g,n=null,o=[];while(null!=(n=t.exec(e))){var c="",r=n[0].replace(/_{2}/g,"").trim();0!==r.length&&(c="<u>"+r+"</u>"),o.push(c.slice(0))}var i=/_{2}[^_]*_?[^_]*_{2}/;return o.forEach((function(t){e=e.replace(i,t)})),e}function p(e){var t=/\*[^*]+\*/g,n=null,o=[];while(null!=(n=t.exec(e))){var c="",r=n[0].replace(/\*/g,"").trim();0!==r.length&&(c="<i>"+r+"</i>"),o.push(c.slice(0))}var i=/\*[^*]+\*/;return o.forEach((function(t){e=e.replace(i,t)})),e}function v(e){var t=/~~[^~]+~~/g,n=null,o=[];while(null!=(n=t.exec(e))){var c="",r=n[0].replace(/~~/g,"").trim();0!==r.length&&(c="<del>"+r+"</del>"),o.push(c.slice(0))}var i=/~~[^~]+~~/;return o.forEach((function(t){e=e.replace(i,t)})),e}function b(e){var t=/`[^`]+`/g,n=null,o=[];while(null!=(n=t.exec(e))){var c="",r=n[0].replace(/`/g,"").trim();0!==r.length&&(c='<code class="codeline">'+r+"</code>"),o.push(c.slice(0))}var i=/`[^`]+`/;return o.forEach((function(t){e=e.replace(i,t)})),e}function g(e){var t=/-{3,}/g;while(t.test(e)){var n="<br/><hr/><br/>";e=e.replace(t,n)}return e}function m(e){return'<div class="codeblock"><pre>'+e+"</pre></div>"}function O(e){var t=/^>\s.*\n/g;if(t.test(e)){var n=e.replace(/^>\s/,""),o='<blockquote class="annotation">'+n+"</blockquote>";e=e.replace(/^>\s.*\n/,o)}return e}function j(e){var t=/(\[.*\])(\(.*\))/g,n=null,o=[];while(null!=(n=t.exec(e))){var c=n[2].slice(1,n[2].length-1),r=n[1].length>2?n[1].slice(1,n[1].length-1):c,i='<a href="'+c+'" target="_blank"><i>'+r+"</i></a>";o.push(i.slice(0))}var l=/(\[.*\])(\(.*\))/;return o.forEach((function(t){e=e.replace(l,t)})),e}function S(e){var t=/<\s?[^<>]+\s?>/g,n=null,o=[];while(null!=(n=t.exec(e))){var c="&lt;"+n[0].slice(1,n[0].length-1)+"&gt;";o.push(c)}var r=/<\s?[^<>]+\s?>/;return o.forEach((function(t){e=e.replace(r,t)})),e}}),D=J,A={name:"App",components:{Preview:f,Mainpane:$},data:function(){return{notehtml:"",mainScrollTop:0}},methods:{noteContent:function(e){this.notehtml=D(e.content),this.mainScrollTop=e.height}}};n("cb97");const L=u()(A,[["render",r]]);var U=L;Object(o["b"])(U).mount("#app")},6894:function(e,t,n){},"724c":function(e,t,n){},"7e05":function(e,t,n){"use strict";n("b5f0")},"919a":function(e,t,n){"use strict";n("cb30")},ad4d:function(e,t,n){"use strict";n("cc7f")},b5f0:function(e,t,n){},c422:function(e,t,n){"use strict";n("19b2")},cb30:function(e,t,n){},cb97:function(e,t,n){"use strict";n("724c")},cc7f:function(e,t,n){}});
//# sourceMappingURL=app.230a251c.js.map